(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return n(6874)}])},6874:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return m}});var t=n(5893),r=n(1535);let i=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch subscriptions");return e.json()});var l=n(7294);function c(e){let{children:s}=e;return(0,t.jsx)("div",{className:"border rounded-lg shadow-sm bg-white",children:s})}function a(e){let{children:s,className:n=""}=e;return(0,t.jsx)("div",{className:"p-4 ".concat(n),children:s})}function d(e){let{children:s,className:n="",...r}=e;return(0,t.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 ".concat(n),...r,children:s})}function o(e){let{defaultValue:s,onValueChange:n,children:r}=e,[i,c]=(0,l.useState)(s),a=e=>{c(e),n(e)};return(0,t.jsx)("div",{"data-tabs-root":!0,"data-value":i,children:l.Children.map(r,e=>l.cloneElement(e,{activeValue:i,onTabChange:a}))})}function u(e){let{children:s,className:n=""}=e;return(0,t.jsx)("div",{className:"flex gap-2 ".concat(n),children:s})}function h(e){let{value:s,children:n,activeValue:r,onTabChange:i}=e,l=s===r;return(0,t.jsx)("button",{className:"px-4 py-2 rounded-md border ".concat(l?"bg-blue-600 text-white":"bg-white text-black border-gray-300"),onClick:()=>null==i?void 0:i(s),children:n})}function x(e){let{value:s,children:n,activeValue:r}=e;return s===r?(0,t.jsx)("div",{children:n}):null}function m(){let[e,s]=(0,l.useState)("subscriptions"),{data:n,isLoading:m,error:j}=function(){let{data:e,error:s,isLoading:n}=(0,r.ZP)("/api/admin/subscriptions",i);return{data:e,error:s,isLoading:n}}();return(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),(0,t.jsxs)(o,{defaultValue:e,onValueChange:s,children:[(0,t.jsxs)(u,{className:"mb-4",children:[(0,t.jsx)(h,{value:"subscriptions",children:"Subscriptions"}),(0,t.jsx)(h,{value:"users",children:"Users"}),(0,t.jsx)(h,{value:"payments",children:"Payments"})]}),(0,t.jsx)(x,{value:"subscriptions",children:(0,t.jsx)(c,{children:(0,t.jsxs)(a,{className:"p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"All Active Subscriptions"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-2",children:"View and manage current subscriptions."}),m&&(0,t.jsx)("p",{children:"Loading subscriptions..."}),j&&(0,t.jsx)("p",{className:"text-red-500",children:"Failed to load subscriptions."}),!m&&!j&&0===n.length&&(0,t.jsx)("p",{className:"text-muted-foreground",children:"No active subscriptions found."}),!m&&!j&&n.length>0&&(0,t.jsx)("ul",{className:"space-y-2 mt-4",children:n.map(e=>{var s;return(0,t.jsxs)("li",{className:"border rounded p-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",null===(s=e.user)||void 0===s?void 0:s.email]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Plan:"})," ",e.stripePriceId]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Next Billing:"})," ",new Date(e.currentPeriodEnd).toLocaleDateString()]})]},e.id)})})]})})}),(0,t.jsx)(x,{value:"users",children:(0,t.jsx)(c,{children:(0,t.jsxs)(a,{className:"p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"User Accounts"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Browse all registered users."})]})})}),(0,t.jsx)(x,{value:"payments",children:(0,t.jsx)(c,{children:(0,t.jsxs)(a,{className:"p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Payment History"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track incoming payments from Stripe."}),(0,t.jsx)(d,{className:"mt-2",children:"Download CSV"})]})})})]})]})}}},function(e){e.O(0,[535,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);